@use '../../variables' as *;
@use '../../mixins' as *;

.friend-card {
    position: relative;
    padding: var(--w-spacing-md);
    border-radius: var(--w-border-radius-xl);
    @include liquid-glass-complete($blur: var(--w-blur-md), $opacity: 0.85, $add-tint: false);
    @include flex(column, space-between, stretch);
    gap: var(--w-spacing-md);
    cursor: default;
    overflow: hidden;
    isolation: isolate;

    // Smooth Transitions
    @include transition(all,
        var(--w-motion-duration-medium),
        var(--w-motion-easing-elegant));

    @include breakpoint(mobile) {
        padding: var(--w-spacing-sm);
        gap: var(--w-spacing-sm);
    }

    &:hover,
    &--hovered {
        transform: translateY(-2px) scale(1.02);
        box-shadow:
            0 12px 28px -4px rgba(0, 0, 0, 0.15),
            0 6px 12px -2px rgba(0, 0, 0, 0.1),
            inset 0 0 0 1px rgba(255, 255, 255, 0.18);

        .friend-card__avatar {
            transform: scale(1.05);
            box-shadow: 0 6px 16px -2px rgba(var(--w-primary-color-rgb), 0.3);
        }
    }

    // Loading state
    &--loading {
        pointer-events: none;
        opacity: 0.7;
    }

    // ðŸŽ¨ HEADER SECTION
    &__header {
        @include flex(row, flex-start, center);
        gap: var(--w-spacing-md);
        position: relative;
        z-index: 1;

        @include breakpoint(mobile) {
            gap: var(--w-spacing-sm);
        }
    }

    &__avatar-wrapper {
        position: relative;
        flex-shrink: 0;
        cursor: pointer;
        @include transition(transform, var(--w-motion-duration-fast));

        &:hover {
            transform: scale(1.05);
        }

        &:active {
            transform: scale(0.95);
        }

        @include focus-visible();
    }

    &__avatar {
        width: 64px;
        height: 64px;
        border-radius: var(--w-border-radius-circle);
        object-fit: cover;
        border: 2px solid rgba(var(--w-background-color-rgb), 0.2);
        @include transition(all, var(--w-motion-duration-medium));

        @include breakpoint(mobile) {
            width: 56px;
            height: 56px;
        }
    }

    &__status-indicator {
        position: absolute;
        bottom: 2px;
        right: 2px;
        width: 16px;
        height: 16px;
        border-radius: var(--w-border-radius-circle);
        border: 2px solid var(--w-background-color);
        @include transition(all, var(--w-motion-duration-fast));

        @include breakpoint(mobile) {
            width: 14px;
            height: 14px;
            border-width: 2px;
        }

        &--online {
            background: var(--w-online-color);
            box-shadow: 0 0 0 2px rgba(var(--w-online-color-rgb), 0.2),
                0 0 12px rgba(var(--w-online-color-rgb), 0.6);
        }

        &--offline {
            background: var(--w-secondary-color);
        }
    }

    &__info {
        flex: 1;
        min-width: 0;
        @include flex(column, center, flex-start);
        gap: 4px;
    }

    &__username {
        font-size: var(--w-font-size-md);
        font-weight: var(--w-font-weight-semibold);
        color: var(--w-text-color);
        margin: 0;
        @include text-truncate(1);
        cursor: pointer;
        @include transition(color, var(--w-motion-duration-fast));

        &:hover {
            color: var(--w-primary-color);
            text-decoration: underline;
            text-decoration-thickness: 1px;
            text-underline-offset: 2px;
        }

        @include breakpoint(mobile) {
            font-size: var(--w-font-size-sm);
        }
    }

    &__status-text {
        font-size: var(--w-font-size-xs);
        color: var(--w-text-color-light);
        margin: 0;
        opacity: 0.8;

        @include breakpoint(mobile) {
            font-size: 0.7rem;
        }
    }

    // ðŸŽ¨ ACTIONS SECTION
    &__actions {
        @include flex(row, flex-end, center);
        gap: var(--w-spacing-sm);
        flex-wrap: wrap;
        position: relative;
        z-index: 1;

        @include breakpoint(mobile) {
            gap: var(--w-spacing-xs);
        }
    }

    &__action-btn {
        @include flex(row, center, center);
        gap: var(--w-spacing-xs);
        padding: var(--w-spacing-sm) var(--w-spacing-md);
        border: none;
        border-radius: var(--w-border-radius-md);
        font-size: var(--w-font-size-sm);
        font-weight: var(--w-font-weight-medium);
        cursor: pointer;
        @include transition(all, var(--w-motion-duration-fast), var(--w-motion-easing-spring));
        white-space: nowrap;
        position: relative;
        overflow: hidden;

        @include breakpoint(mobile) {
            padding: var(--w-spacing-xs);
            font-size: var(--w-font-size-xs);
        }

        // Ripple effect base
        &::before {
            content: '';
            position: absolute;
            inset: 0;
            background: currentColor;
            opacity: 0;
            @include transition(opacity, 0.15s);
        }

        &:hover::before {
            opacity: 0.1;
        }

        &:active {
            transform: scale(0.95);
        }

        &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        @include focus-visible();

        // Variants
        &--add {
            background: linear-gradient(135deg,
                    rgba(var(--w-primary-color-rgb), 0.15),
                    rgba(var(--w-primary-color-rgb), 0.1));
            color: var(--w-primary-color);
            border: 1px solid rgba(var(--w-primary-color-rgb), 0.3);

            &:hover {
                background: rgba(var(--w-primary-color-rgb), 0.2);
                box-shadow: 0 4px 12px rgba(var(--w-primary-color-rgb), 0.2);
                transform: translateY(-2px);
            }
        }

        &--accept {
            background: linear-gradient(135deg,
                    rgba(var(--w-success-color-rgb), 0.15),
                    rgba(var(--w-success-color-rgb), 0.1));
            color: var(--w-success-color);
            border: 1px solid rgba(var(--w-success-color-rgb), 0.3);

            &:hover {
                background: rgba(var(--w-success-color-rgb), 0.2);
                box-shadow: 0 4px 12px rgba(var(--w-success-color-rgb), 0.2);
                transform: translateY(-2px);
            }
        }

        &--reject,
        &--remove {
            background: linear-gradient(135deg,
                    rgba(var(--w-danger-color-rgb), 0.15),
                    rgba(var(--w-danger-color-rgb), 0.1));
            color: var(--w-danger-color);
            border: 1px solid rgba(var(--w-danger-color-rgb), 0.3);

            &:hover {
                background: rgba(var(--w-danger-color-rgb), 0.2);
                box-shadow: 0 4px 12px rgba(var(--w-danger-color-rgb), 0.2);
                transform: translateY(-2px);
            }
        }

        &--chat {
            background: linear-gradient(135deg,
                    rgba(var(--w-info-color-rgb), 0.15),
                    rgba(var(--w-info-color-rgb), 0.1));
            color: var(--w-info-color);
            border: 1px solid rgba(var(--w-info-color-rgb), 0.3);

            &:hover {
                background: rgba(var(--w-info-color-rgb), 0.2);
                box-shadow: 0 4px 12px rgba(var(--w-info-color-rgb), 0.2);
                transform: translateY(-2px);
            }
        }

        &--pending {
            background: linear-gradient(135deg,
                    rgba(var(--w-warning-color-rgb), 0.15),
                    rgba(var(--w-warning-color-rgb), 0.1));
            color: var(--w-warning-color);
            border: 1px solid rgba(var(--w-warning-color-rgb), 0.3);
            cursor: not-allowed;
        }
    }

    // Dark mode adjustments
    [data-ww-theme="dark"] & {
        &:hover,
        &--hovered {
            box-shadow:
                0 12px 32px -6px rgba(0, 0, 0, 0.3),
                0 6px 16px -4px rgba(0, 0, 0, 0.2),
                inset 0 0 0 1px rgba(255, 255, 255, 0.2);
        }
    }

    // Reduced motion
    @media (prefers-reduced-motion: reduce) {
        &:hover,
        &--hovered {
            transform: none;
        }

        &__avatar-wrapper:hover {
            transform: none;
        }

        &__action-btn:active {
            transform: none;
        }
    }
}